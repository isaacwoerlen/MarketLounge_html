<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>ğŸ“˜ README_Architecture du Lounge_V07.md</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>ğŸ“˜ README_Architecture du Lounge_V07.md</h1>
    <pre><code>ğŸ“˜ Architecture du moteur Lounge (V07)

ğŸ§­ INTRODUCTIONCe document dÃ©crit lâ€™architecture du moteur sÃ©mantique de The Lounge, conÃ§u pour connecter les requÃªtes acheteurs aux capacitÃ©s techniques des entreprises via un matching sÃ©mantique gouvernÃ©. Il interprÃ¨te des requÃªtes complexes (ex. : Â« inox 316 pour aÃ©ro dans le 59 Â») pour identifier des concepts mÃ©tier activables et gÃ©nÃ©rer une shortlist dâ€™entreprises pertinentes. Lâ€™architecture est modulaire, Ã©volutive, et centrÃ©e sur la rÃ©alitÃ© industrielle.  
Ce document est alignÃ© avec README Brief Technique.md, qui dÃ©taille lâ€™implÃ©mentation technique (stack, conventions dev). V07 remplace V04/06 ; chapitres renumÃ©rotÃ©s pour reflÃ©ter le flux logique (offline â†’ runtime â†’ apprentissage).
Principes No-Overlap

Chaque app a un rÃ´le unique, sans chevauchement.  
Exemple : dico gÃ©nÃ¨re concepts offline ; matching exÃ©cute matching runtime ; curation valide humainement.  
TÃ¢ches offline/runtime strictement sÃ©parÃ©es ; dÃ©lÃ©gations via modÃ¨le "pull".  
Pas de modification directe des donnÃ©es dâ€™une autre app ; appels explicites.

Flux Global des Apps
graph TD  
    CompanyProfile -->|Facettes brutes| Dico[Offline: GÃ©nÃ©ration concepts]  
    Glossaire -->|Validation| Dico  
    Dico -->|Concepts validÃ©s| Activation[Offline: Index activations]  
    Activation -->|Activations| Matching[Runtime: Hybrid search]  
    RequÃªte -->|NLP| Matching  
    Matching -->|Shortlist + Scores| Logs[TraÃ§abilitÃ©]  
    Logs -->|Feedback/Proposals| Curation[Validation humaine]  
    Curation -->|Enrichissements validÃ©s| Dico  
    Market -->|Analyse| Logs  


ğŸ§± Piliers Fonctionnels  

Glossaire MÃ©tier : Structure stable des savoir-faire (MÃ©tier â†’ OpÃ©ration â†’ Variante). RÃ´le : Validation canonique.  
Company Profile : DÃ©claration brute des capacitÃ©s. RÃ´le : Collecte facettes sans interprÃ©tation.  
Dictionnaire SÃ©mantique (Dico) : GÃ©nÃ©ration offline de concepts activables. RÃ´le : CrÃ©ation/enrichissement statique.  
Company Concept Activation : Indexation runtime des savoir-faire activÃ©s. RÃ´le : Fournir activations pour matching.


@@ -10,6 +10,10 @@
 Principes No-Overlap
 
 Chaque app a un rÃ´le unique, sans chevauchement.  
+Multi-tenancy Global : Toutes les apps gÃ©rant des donnÃ©es sensibles (ex. : company, activation, glossary, market) supportent le multi-tenancy via un champ tenant_id (validÃ© par regex ^tenant_[a-zA-Z0-9_]+$). Cela permet sharding par tenant pour scalabilitÃ© (ex. : partition DB PostgreSQL). Les transverses comme language/LLM_ai appliquent cela aux jobs/modÃ¨les pour isolation.
+
 Exemple : dico gÃ©nÃ¨re concepts offline ; matching exÃ©cute matching runtime ; curation valide humainement.  
 TÃ¢ches offline/runtime strictement sÃ©parÃ©es ; dÃ©lÃ©gations via modÃ¨le "pull".  
 Pas de modification directe des donnÃ©es dâ€™une autre app ; appels explicites.
@@ -300,6 +304,7 @@
 
 App
 Type
+Multi-tenancy
 Chapitre
 RÃ´le (strict)
 Technos
@@ -307,6 +312,7 @@
 Flux Sortants
 Limites
 
+âœ… (tenant_id)
 glossary
 Verticale
 1
@@ -314,6 +320,7 @@
 PostgreSQL, JSONField
 -
 Refs â†’ Dico
+âœ… (tenant_id)
 Pas enrichissement/matching
 
 company
@@ -321,6 +328,7 @@
 2
 Collecte facettes
 PostgreSQL, societe.com
+âœ… (tenant_id)
 -
 Facettes â†’ Dico
 Pas gÃ©nÃ©ration
@@ -328,6 +336,7 @@
 dico
 Verticale
 3, 4
+âœ… (tenant_id sur concepts)
 GÃ©nÃ©ration concepts offline
 pgvector, sentence-transformers, LLM_ai
 Facettes (Company), Refs (Glossaire), Proposals (Curation)
@@ -335,6 +344,7 @@
 Offline only
 
 matching
+âœ… (tenant_id sur recherches)
 Verticale
 6, 7
 Matching runtime
@@ -342,6 +352,7 @@
 Concepts (Dico), Activations (Activation), RequÃªte
 Shortlist â†’ Logs
 Runtime only
+âœ… (tenant_id sur index)
 
 activation
 Verticale
@@ -349,6 +360,7 @@
 Index activations
 PostgreSQL
 Concepts (Dico)
+âœ… (tenant_id sur logs)
 Activations â†’ Matching
 Index only
 
@@ -356,6 +368,7 @@
 Verticale
 8
 Tracer requÃªtes
+âœ… (tenant_id sur insights)
 PostgreSQL, metrics
 Shortlist (Matching)
 Feedback â†’ Curation/Market
@@ -363,6 +376,7 @@
 
 market
 Verticale
+âœ… (tenant_id sur proposals)
 9
 Analyse marchÃ©
 pgvector, LLM_ai
@@ -370,6 +384,7 @@
 Insights
 Pas SEO/matching
 
+âœ… (tenant_id global)
 curation
 Verticale
 10
@@ -377,6 +392,7 @@
 Django admin, Celery, LLM_ai
 Feedback (Logs)
 Proposals â†’ Dico
+âœ… (tenant_id sur traductions)
 Pas enrichissement
 
 language
@@ -384,6 +400,7 @@
 Tous
 Traduction
 Mistral API
+âœ… (tenant_id sur appels)
 Appels pull
 Traductions
 Appel pull only

ğŸ§© PortÃ©e du MVP  

Core MVP : glossary, company, dico, activation, matching, logs.  
V1.1+ : market, curation, fonctionnalitÃ©s SEO, feedback utilisateur.


ğŸ§  Limites Globales  



App
Limite
Justification



glossary
Pas dâ€™enrichissement/matching
Fournit structure stable


company
Pas de gÃ©nÃ©ration concepts
Collecte facettes brutes


dico
Offline only ; pas de matching
GÃ©nÃ¨re/enrichit concepts


matching
Runtime only ; pas de gÃ©nÃ©ration
ExÃ©cute hybrid search


activation
Index only ; pas de search
Fournit activations


market
Pas de SEO/matching
Analyse marchÃ©


logs
Logs purs ; pas dâ€™analyse
Trace requÃªtes/scores


curation
Pas dâ€™enrichissement direct
Valide proposals



ğŸ“š GLOSSAIRE MÃ‰TIERğŸ¯ RÃ´leColonne vertÃ©brale sÃ©mantique : dÃ©finit nÅ“uds mÃ©tier typÃ©s (mÃ©tier, opÃ©ration, variante).RÃ´le dÃ©diÃ© : Fournir structure stable pour validation offline par dico.


DÃ©finir nÅ“uds gouvernÃ©s  
Produire node_id stables  
Fournir descriptions riches  
GÃ©nÃ©rer paths contextuels  
Fournir tags/related_to

âš™ï¸ Structure  



Attribut
Description



node_id
Identifiant stable (ex. fraisage_cn)


type
MÃ©tier, opÃ©ration, variante


labels
Noms multilingues


definition
DÃ©finition prÃ©cise


procÃ©dÃ©
MÃ©thode technique


explication_technique
DÃ©tail industriel


contextual_description
Bloc vectorisable


paths
Chemins contextuels


tags
Mots-clÃ©s


related_to
Liens faibles


status
draft, validated, deprecated


version
Version nÅ“ud


ğŸ§© ArticulationUtilisÃ© par dico pour validation offline. DÃ©lÃ¨gue matching Ã  matching.  

ğŸ­ COMPANY PROFILEğŸ¯ RÃ´leDÃ©claration brute entreprise : collecte facettes (opÃ©rations, matiÃ¨res, machines).RÃ´le dÃ©diÃ© : Fournir facettes sans interprÃ©tation.


CrÃ©er profil (API, scraping, manuel)  
DÃ©clarer facettes  
Valider via curation

âš™ï¸ Structure  



Attribut
Description



company_id
Identifiant entreprise


facettes
OpÃ©rations, matiÃ¨res, machines


source
API, scraping, manuel


ğŸ§© ArticulationFacettes â†’ dico pour gÃ©nÃ©ration concepts. Pas de lien runtime direct.  

ğŸ§  DICTIONNAIRE SÃ‰MANTIQUE (DICO)ğŸ¯ RÃ´leCerveau offline : gÃ©nÃ¨re concepts activables (concept_ID).RÃ´le dÃ©diÃ© : CrÃ©ation/enrichissement statique offline.


CrÃ©er concept_IDs  
Enrichir (synonymes, embeddings)  
Exposer Ã  matching

âš™ï¸ Structure  



Attribut
Description



concept_ID
Identifiant stable


labels
Noms multilingues


definition
DÃ©finition prÃ©cise


synonyms
Variantes lexicales


related_to
Liens faibles


tags
Mots-clÃ©s


embedding
Vecteur statique


glossary_node_ids
RÃ©fÃ©rences Glossaire


path
Chemin contextuel


contextual_description
Bloc enrichi


ğŸ”„ Cycle[Company Profile] â†’ [Facettes] â†’ [Dico offline] â†’ [Concept proposÃ©] â†’ [Glossaire validation] â†’ [Curation validation] â†’ [Concept_ID] â†’ [Indexation Dico]  
ğŸ§© ArticulationFacettes (company), RÃ©fs (glossary), Proposals (curation) â†’ Concepts â†’ activation/matching.  

ğŸ“š GÃ‰NÃ‰RATION ET USAGE DES CONCEPT_IDğŸ¯ RÃ´leGÃ©nÃ©ration offline (concept_IDs) ; usage runtime (matching, indexation, analyse).


GÃ©nÃ©rer via dico  
Utiliser dans matching, activation, market

ğŸ§¬ Sources  



Source
RÃ´le
CrÃ©e concept_ID ?



Glossaire
Structure stable
âœ… Base sÃ©mantique


Company Profile
Facettes
âœ… Source usage


RequÃªtes
Signal usage
âŒ Nourrit proposals


âš™ï¸ Processus (offline)  

Analyse facettes (dico)  
Mapping Glossaire  
Enrichissement statique  
Validation via curation

ğŸ§© Articulationdico â†’ activation (indexation), matching (runtime), market (analyse).  

ğŸš€ ACTIVATION DES CONCEPTSğŸ¯ RÃ´leIndex runtime des savoir-faire activÃ©s.RÃ´le dÃ©diÃ© : Indexer activations offline pour matching.


Activer concept_ID  
Indexer facettes  
Stocker evidence

âš™ï¸ Structure  



Attribut
Description



company_id
Identifiant entreprise


concept_ID
Concept activÃ©


facettes
Tags associÃ©s


evidence
Justification


is_claimed
RevendiquÃ©


ğŸ”„ Cycle[Company Profile] â†’ [Facettes] â†’ [Dico] â†’ [Concept_IDs] â†’ [Activation offline] â†’ [Index Activation]  
ğŸ§© ArticulationConcepts (dico) â†’ Activations â†’ matching.  

ğŸ§  MATCHINGğŸ¯ RÃ´leMatching runtime hybrid (lexical + vectoriel) sur concepts de dico.RÃ´le dÃ©diÃ© : ExÃ©cuter matching, cache rÃ©sultats via Redis.


NLP + parsing requÃªte  
Matching lexical/vectoriel  
Fusion/scoring  
Filtrage via activation

âš™ï¸ Hybrid Search  
graph TD  
    A[RequÃªte] --> B[NLP]  
    B --> C1[Lexical]  
    B --> C2[Vectoriel]  
    C1 --> D[Fusion]  
    C2 --> D  
    D --> E[Filtrage Activation]  
    E --> F[Shortlist]  
    F --> G[Logs]  

ğŸ§© Composants  



Composant
RÃ´le



company_profile
Source brute


dico
Concepts offline


activation
Filtrage


logs
ObservabilitÃ©


ğŸ§© ArticulationConcepts (dico), Activations (activation), RequÃªte â†’ Shortlist â†’ logs.  

ğŸ§  MOTEUR Dâ€™EXPLICABILITÃ‰ğŸ¯ RÃ´leJustifier dÃ©cisions runtime via matching.RÃ´le dÃ©diÃ© : GÃ©nÃ©rer/stocker explications.


Produire justifications (scores, relations)  
Stocker dans logs

âš™ï¸ Fonctionnement  
graph TD  
    A[RequÃªte] --> B[Matching]  
    B --> C[Shortlist]  
    C --> D[ExplicabilitÃ©]  
    D --> E[Logs]  

ğŸ§© Types dâ€™Explication  



Type
Exemple



Relation
â€œReliÃ© via â€˜proche_deâ€™â€


Score
â€œCosine 0.88â€


Exclusion
â€œNon activÃ©â€


ğŸ§© ArticulationConcepts (dico), Activations (activation) â†’ Explications (matching) â†’ logs.  

ğŸ§  REQUEST_ID & QUERY MATCH LOGğŸ¯ RÃ´leObservabilitÃ© runtime via logs.RÃ´le dÃ©diÃ© : Tracer requÃªtes/scores.


Assigner request_ID  
Logger texte, concept_ID, scores  
Alimenter curation/market

ğŸ§© ArticulationShortlist/scores (matching) â†’ Feedback â†’ curation/market.  

ğŸ§  MARKET INTELLIGENCEğŸ¯ RÃ´leAnalyse marchÃ© via market.RÃ´le dÃ©diÃ© : Croiser offre/demande sans SEO/matching.


DÃ©tecter tensions/raretÃ©s  
Produire insights

ğŸ§© ArticulationLogs (logs), Activations (activation) â†’ Insights (API/UI).  

ğŸ”„ CYCLE Dâ€™APPRENTISSAGEğŸ¯ RÃ´leAmÃ©lioration asynchrone via curation.RÃ´le dÃ©diÃ© : Valider proposals (Django admin/CLI).


Valider humainement  
Enrichir via dico

ğŸ” Flux  
graph TD  
    A[RequÃªte] --> B[Matching]  
    B --> C[Logs]  
    C --> D[Curation]  
    D --> E[Proposals]  
    E --> F[Validation]  
    F --> G[Dico]  

ğŸ§© Enrichissements  



Type
Exemple



Lexical
â€œusinage 5 axesâ€ â†’ â€œfraisage multi-axesâ€


SÃ©mantique
â€œdÃ©coupe laserâ€ proche â€œjet dâ€™eauâ€


ğŸ§© ArticulationFeedback (logs) â†’ Proposals (curation) â†’ Enrichissements (dico).  
ğŸ“Š Tableau des Apps



App
Type
Chapitre
RÃ´le (strict)
Technos
Flux Entrants
Flux Sortants
Limites



glossary
Verticale
1
Structure stable
PostgreSQL, JSONField
-
Refs â†’ Dico
Pas enrichissement/matching


company
Verticale
2
Collecte facettes
PostgreSQL, societe.com
-
Facettes â†’ Dico
Pas gÃ©nÃ©ration


dico
Verticale
3, 4
GÃ©nÃ©ration concepts offline
pgvector, sentence-transformers, LLM_ai
Facettes (Company), Refs (Glossaire), Proposals (Curation)
Concepts â†’ Activation/Matching
Offline only


matching
Verticale
6, 7
Matching runtime
FAISS, pgvector, reranker, LLM_ai, Redis
Concepts (Dico), Activations (Activation), RequÃªte
Shortlist â†’ Logs
Runtime only


activation
Verticale
5
Index activations
PostgreSQL
Concepts (Dico)
Activations â†’ Matching
Index only


logs
Verticale
8
Tracer requÃªtes
PostgreSQL, metrics
Shortlist (Matching)
Feedback â†’ Curation/Market
Logs purs


market
Verticale
9
Analyse marchÃ©
pgvector, LLM_ai
Logs, Activations
Insights
Pas SEO/matching


curation
Verticale
10
Validation humaine
Django admin, Celery, LLM_ai
Feedback (Logs)
Proposals â†’ Dico
Pas enrichissement


language
Transverse
Tous
Traduction
Mistral API
Appels pull
Traductions
Appel pull only


seo
Transverse
9
Balises SEO
Django templates, language
Appels pull
Balises
Pas analyse


LLM_ai
Transverse
3, 6, 7, 9, 10
Enrichissement
Mistral API, Redis
Appels pull
Enrichissements
Service only


taxonomy
Transverse
1, 3
Types/hiÃ©rarchies
PostgreSQL, JSONField
Appels pull
Structures
Pas relations dynamiques


media
Transverse
1, 2
MultimÃ©dias
Django FileField, S3
Appels pull
Fichiers
Storage only


metrics
Transverse
8, 9
Stats
PostgreSQL, Grafana
Appels pull
MÃ©triques
Collection only


permissions
Transverse
10
AccÃ¨s
Django auth
Appels pull
RÃ¨gles
RÃ¨gles only

</code></pre>
</body>
</html>